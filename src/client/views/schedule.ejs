<%- include('./partials/sidebar.ejs') %>
<%- include('./partials/viewSwitch.ejs') %>

<% function getDateOfISOWeek(w, y) { %>
<%      var simple = new Date(y, 0, 1 + (w - 1) * 7); %>
<%      var dow = simple.getDay(); %>
<%      var ISOweekStart = simple; %>
<%      if (dow <= 4){ %>
<%          ISOweekStart.setDate(simple.getDate() - simple.getDay() + 1); %>
<%      } else { %>
<%          ISOweekStart.setDate(simple.getDate() + 8 - simple.getDay()); %>
<%      } %>
<%      return ISOweekStart; %>
<% } %>


<div class="tabBoxContainer">
    <h1 class="scheduleTitle"><%= getDateOfISOWeek(userInfo.schedule[0].weekNumber, userInfo.schedule[0].year).toLocaleDateString('default', {month: 'long'}) %> - <%= userInfo.schedule[0].year %></h1>
    <div class="tabBar">
        <ul class="tablist">
            <!-- depends on the data send in .type = day | week | month, li content change  -->
            
            <button class="tab">Monday</button>
            <button class="tab">Tuesday</button>
            <button class="tab">Wednesday</button>
            <button class="tab">Thursday</button>
            <button class="tab">Friday</button>
            
        </ul>
    </div>
    <div class="scheduleContainer">
        <%- include('./partials/scheduleBlock.ejs') %> 
    </div>
</div>

<script type="text/javascript">
    function openPage(pageName, element, color){
        var tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        tablinks = document.getElementsByClassName("tab");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        for (var i = 0; i < tablinks.length; i++){
            tablinks[i].style.backgroundColor = "";
        }
        document.getElementById(pageName).style.display = "block";

        element.style.backgroundColor = color;
    }
    document.getElementById("defaultopen").click();

    function getDateOfWeek(w, y) {
        var d = (1 + (w - 1) * 7); // 1st of January + 7 days for each week

    return new Date(y, 0, d);
}

</script>